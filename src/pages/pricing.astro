---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import PricingCard from '../components/PricingCard.astro';

const tiers = [
  {
    name: 'Team',
    price: '$9',
    period: '/user/month',
    description: 'Real-time sync for individuals and small teams.',
    features: [
      'Real-time CRDT sync',
      'End-to-end encryption',
      'TLS 1.3 transport',
      'Up to 5 projects',
      'Up to 10 team members',
      'Community support',
    ],
    cta: 'Join Waitlist',
    popular: false,
  },
  {
    name: 'Enterprise',
    price: '$29',
    period: '/user/month',
    description: 'For organizations that need compliance and control.',
    features: [
      'Everything in Team',
      'SSO / SAML authentication',
      'Role-based access control',
      'Immutable audit logs',
      'US or EU data residency',
      '99.9% SLA guarantee',
    ],
    cta: 'Join Waitlist',
    popular: true,
  },
  {
    name: 'On-Prem',
    price: 'Custom',
    period: undefined,
    description: 'Self-hosted for defense, government, and regulated industries.',
    features: [
      'Everything in Enterprise',
      'Self-hosted deployment',
      'Air-gapped network support',
      'Full data sovereignty',
      'ITAR/EAR compatible',
      'Dedicated engineering',
    ],
    cta: 'Contact Sales',
    ctaHref: 'mailto:sales@rtmx.ai?subject=RTMX%20On-Prem%20Inquiry',
    popular: false,
  },
];
---

<StarlightPage frontmatter={{ title: 'RTMX Sync', template: 'splash', hero: { tagline: '' } }}>
  <div class="pricing-page">
    <section class="pricing-header">
      <span class="coming-soon-badge">Coming Soon</span>
      <h1>RTMX Sync</h1>
      <p class="pricing-subtitle">
        Real-time collaboration for your requirements traceability matrix.
        Powered by CRDTs for conflict-free editing across your team.
      </p>
    </section>

    <section class="pricing-grid not-content">
      {tiers.map(tier => (
        <PricingCard
          name={tier.name}
          price={tier.price}
          period={tier.period}
          description={tier.description}
          features={tier.features}
          cta={tier.cta}
          ctaHref={tier.ctaHref}
          popular={tier.popular}
        />
      ))}
    </section>

    <section class="waitlist-section" id="waitlist">
      <h2>Join the Waitlist</h2>
      <p>Be the first to know when RTMX Sync launches.</p>
      <form
        action="https://formspree.io/f/xwpkkbwk"
        method="POST"
        class="waitlist-form"
      >
        <input
          type="email"
          name="email"
          placeholder="you@example.com"
          required
          class="email-input"
        />
        <input type="hidden" name="_subject" value="RTMX Sync Waitlist Signup" />
        <button type="submit" class="submit-button">Notify Me</button>
      </form>
      <p class="privacy-note">We'll only email you about RTMX Sync. No spam.</p>
    </section>

    <section class="faq-section">
      <h2>Questions</h2>
      <div class="faq-grid not-content">
        <div class="faq-item">
          <h3>What is CRDT sync?</h3>
          <p>
            CRDTs (Conflict-free Replicated Data Types) allow multiple users to edit
            the same data simultaneously without conflicts. Changes merge automatically,
            even when offline.
          </p>
        </div>
        <div class="faq-item">
          <h3>When will it launch?</h3>
          <p>
            We're targeting Q2 2025 for early access. Join the waitlist to get priority
            access and help shape the product.
          </p>
        </div>
        <div class="faq-item">
          <h3>Can I self-host?</h3>
          <p>
            Yes. Our On-Prem tier provides a fully self-hosted deployment option
            for organizations that require data sovereignty or air-gapped environments.
          </p>
        </div>
        <div class="faq-item">
          <h3>How does it work with RTMX?</h3>
          <p>
            RTMX Sync integrates directly with your existing RTMX setup. Your CSV remains
            the source of truth, with real-time sync layered on top for collaboration.
          </p>
        </div>
        <div class="faq-item">
          <h3>How is my data secured?</h3>
          <p>
            All data is end-to-end encrypted using AES-256-GCM. The server only sees
            ciphertext. TLS 1.3 protects data in transit. Enterprise adds SSO, RBAC,
            and immutable audit logs.
          </p>
        </div>
        <div class="faq-item">
          <h3>Is it compliant for defense work?</h3>
          <p>
            Yes. On-Prem deployment supports air-gapped networks, ITAR/EAR compliance,
            and full data sovereignty. Your requirements data never leaves your infrastructure.
          </p>
        </div>
      </div>
    </section>

    <footer class="pricing-footer">
      <p>
        Built by <a href="https://iotactical.co">ioTACTICAL Engineering</a> |
        <a href="mailto:sales@rtmx.ai">sales@rtmx.ai</a>
      </p>
    </footer>
  </div>
</StarlightPage>

<style is:global>
  /* Hide Starlight's default hero/title for pricing page */
  .hero,
  main > header,
  .content-panel > header,
  [aria-label="Main"] > header {
    display: none !important;
  }

  /* Remove Starlight's default content padding */
  .main-pane,
  .content-panel {
    padding: 0 !important;
    padding-block: 0 !important;
  }

  .sl-container {
    max-width: 100% !important;
    padding: 0 !important;
  }

  main {
    padding: 0 !important;
  }

  .pricing-page {
    background: #0a0a0a;
    min-height: 100vh;
    width: 100%;
  }

  .pricing-header {
    text-align: center;
    padding: 2rem 2rem 2rem;
  }

  .coming-soon-badge {
    display: inline-block;
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: #0a0a0a;
    font-size: 0.75rem;
    font-weight: 700;
    padding: 0.375rem 1rem;
    border-radius: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 1rem;
  }

  .pricing-header h1 {
    font-size: 3rem;
    font-weight: 700;
    margin: 0 0 1rem 0;
    background: linear-gradient(135deg, #10b981 0%, #6ee7b7 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .pricing-subtitle {
    font-size: 1.25rem;
    color: #9ca3af;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
  }

  .pricing-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
    max-width: 1100px;
    margin: 0 auto;
    padding: 1rem 2rem 4rem;
  }

  .waitlist-section {
    text-align: center;
    padding: 4rem 2rem;
    background: #0f0f0f;
    border-top: 1px solid #262626;
    border-bottom: 1px solid #262626;
  }

  .waitlist-section h2 {
    font-size: 2rem;
    color: #f9fafb;
    margin: 0 0 0.5rem 0;
  }

  .waitlist-section > p {
    color: #9ca3af;
    margin: 0 0 2rem 0;
  }

  .waitlist-form {
    display: flex;
    gap: 1rem;
    justify-content: center;
    max-width: 500px;
    margin: 0 auto;
    flex-wrap: wrap;
  }

  .email-input {
    flex: 1;
    min-width: 250px;
    padding: 0.875rem 1rem;
    border-radius: 0.5rem;
    border: 1px solid #404040;
    background: #171717;
    color: #f9fafb;
    font-size: 1rem;
    font-family: inherit;
  }

  .email-input::placeholder {
    color: #6b7280;
  }

  .email-input:focus {
    outline: none;
    border-color: #10b981;
  }

  .submit-button {
    padding: 0.875rem 2rem;
    border-radius: 0.5rem;
    border: none;
    background: #10b981;
    color: #0a0a0a;
    font-weight: 600;
    font-size: 1rem;
    font-family: inherit;
    cursor: pointer;
    transition: background 0.2s ease;
  }

  .submit-button:hover {
    background: #6ee7b7;
  }

  .privacy-note {
    font-size: 0.85rem;
    color: #6b7280;
    margin-top: 1rem;
  }

  .faq-section {
    padding: 4rem 2rem;
    max-width: 1100px;
    margin: 0 auto;
  }

  .faq-section h2 {
    font-size: 2rem;
    color: #f9fafb;
    text-align: center;
    margin: 0 0 2rem 0;
  }

  .faq-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }

  .faq-item {
    background: #171717;
    border: 1px solid #262626;
    border-radius: 0.75rem;
    padding: 1.5rem;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
  }

  .faq-item h3 {
    color: #f9fafb;
    font-size: 1.1rem;
    margin: 0 0 0.5rem 0;
    flex-shrink: 0;
  }

  .faq-item p {
    color: #9ca3af;
    font-size: 0.95rem;
    line-height: 1.6;
    margin: 0;
    flex: 1;
  }

  .pricing-footer {
    padding: 2rem;
    text-align: center;
    border-top: 1px solid #262626;
  }

  .pricing-footer p {
    color: #6b7280;
    font-size: 0.9rem;
    margin: 0;
  }

  .pricing-footer a {
    color: #10b981;
    text-decoration: none;
  }

  .pricing-footer a:hover {
    text-decoration: underline;
  }

  @media (max-width: 900px) {
    .pricing-grid {
      grid-template-columns: 1fr;
      max-width: 400px;
    }

    .pricing-card.popular {
      order: -1;
    }

    .faq-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 600px) {
    .faq-grid {
      grid-template-columns: 1fr;
    }

    .pricing-header h1 {
      font-size: 2.25rem;
    }

    .pricing-subtitle {
      font-size: 1rem;
    }

    .waitlist-form {
      flex-direction: column;
    }

    .email-input {
      min-width: 100%;
    }
  }
</style>
